// src/modules/dynamic-models/localization/config/brazil.config.ts
import { LocaleConfig, CountryRegulations } from '../../types/base';

export const BrazilConfig: LocaleConfig = {
  country: 'BR',
  currency: 'BRL',
  language: 'pt-BR',
  units: 'mixed', // Brasil usa kg y arroba (15kg)
  dateFormat: 'DD/MM/YYYY',
  numberFormat: {
    locale: 'pt-BR',
    options: {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
      useGrouping: true
    }
  },
  taxRules: {
    incomeTax: {
      rate: 0.275,
      name: 'IRPJ',
      code: 'IRPJ'
    },
    vatRate: {
      rate: 0.18,
      name: 'ICMS',
      code: 'ICMS'
    },
    specialTaxes: [
      {
        name: 'FUNRURAL',
        type: 'rural',
        rate: 0.023,
        code: 'FUNRURAL',
        description: 'Contribuição ao FUNRURAL'
      },
      {
        name: 'PIS/COFINS',
        type: 'social',
        rate: 0.0925,
        code: 'PIS-COFINS',
        description: 'Contribuições sociais'
      }
    ]
  },
  regulations: {
    taxRates: [
      { rate: 0.275, name: 'IRPJ', code: 'IRPJ', type: 'income' },
      { rate: 0.18, name: 'ICMS', code: 'ICMS', type: 'vat' },
      { rate: 0.023, name: 'FUNRURAL', code: 'FUNRURAL', type: 'rural' }
    ],
    requiredDocuments: [
      {
        name: 'Cadastro SISBOV',
        code: 'SISBOV',
        mandatory: true,
        renewalPeriod: 365,
        authority: 'MAPA'
      },
      {
        name: 'GTA - Guia de Trânsito Animal',
        code: 'GTA',
        mandatory: true,
        renewalPeriod: 5, // dias por guia
        authority: 'Defesa Agropecuária Estadual'
      },
      {
        name: 'CAR - Cadastro Ambiental Rural',
        code: 'CAR',
        mandatory: true,
        renewalPeriod: 0,
        authority: 'MMA'
      }
    ],
    complianceRules: [
      {
        name: 'Vacinação Febre Aftosa',
        code: 'VAC-AFTOSA',
        field: 'vaccinations.aftosa',
        validator: (value: any) => value === true,
        message: 'Vacinação contra febre aftosa obrigatória',
        frequency: 180
      },
      {
        name: 'Rastreabilidade SISBOV',
        code: 'TRACE-SISBOV',
        field: 'traceability.sisbov',
        validator: (value: any) => value === true,
        message: 'Rastreabilidade SISBOV obrigatória para exportação'
      },
      {
        name: 'Reserva Legal',
        code: 'RESERVA-LEGAL',
        field: 'environmental.legalReserve',
        validator: (value: number) => value >= 20, // % da propriedade
        message: 'Mínimo 20% de Reserva Legal (80% na Amazônia)'
      }
    ],
    reportingRequirements: [
      {
        name: 'Declaração Anual SISBOV',
        code: 'DECL-SISBOV',
        frequency: 'annual',
        authority: 'MAPA',
        deadline: '12-31'
      },
      {
        name: 'DIPJ - Declaração IRPJ',
        code: 'DIPJ',
        frequency: 'annual',
        authority: 'Receita Federal',
        deadline: '06-30'
      },
      {
        name: 'Relatório Ambiental',
        code: 'REL-AMBIENTAL',
        frequency: 'annual',
        authority: 'IBAMA',
        deadline: '03-31'
      }
    ]
  }
};

// Configuração específica para pecuária no Brasil
export const BrazilianCattleConfig = {
  // Raças mais comuns
  commonBreeds: ['Nelore', 'Angus', 'Brahman', 'Tabapuã', 'Guzerá', 'Gir', 'Senepol'],
  
  // Sistemas de produção
  productionSystems: {
    extensive: {
      name: 'Extensivo (Pasto)',
      density: 1.2, // UA/hectare
      common: true
    },
    semiIntensive: {
      name: 'Semi-intensivo',
      density: 3.0,
      common: true
    },
    intensive: {
      name: 'Confinamento',
      density: 500, // animais/hectare em confinamento
      common: true
    }
  },
  
  // Regiões pecuárias
  cattleRegions: [
    { name: 'Mato Grosso', code: 'MT', climate: 'tropical', biome: 'Cerrado' },
    { name: 'Mato Grosso do Sul', code: 'MS', climate: 'tropical', biome: 'Cerrado' },
    { name: 'Goiás', code: 'GO', climate: 'tropical', biome: 'Cerrado' },
    { name: 'Pará', code: 'PA', climate: 'equatorial', biome: 'Amazônia' },
    { name: 'Rondônia', code: 'RO', climate: 'equatorial', biome: 'Amazônia' },
    { name: 'Minas Gerais', code: 'MG', climate: 'tropical', biome: 'Cerrado/Mata Atlântica' }
  ],
  
  // Preços de referência
  referencePrices: {
    cattlePurchase: {
      min: 280, // R$/arroba
      max: 320,
      average: 300,
      unit: 'arroba'
    },
    cattleSale: {
      min: 300, // R$/arroba
      max: 350,
      average: 325,
      unit: 'arroba'
    },
    feedCostPerDay: {
      min: 8,
      max: 15,
      average: 12,
      unit: 'real'
    }
  },
  
  // Métricas típicas
  typicalMetrics: {
    mortalityRate: 2.8,
    dailyWeightGain: 0.7, // Pasto
    dailyWeightGainConfinement: 1.5, // Confinamento
    feedConversion: 9.0,
    dressingPercentage: 54,
    pregnancyRate: 75,
    stockingRate: 1.2 // UA/hectare
  },
  
  // Conversões específicas
  conversions: {
    arrobaToKg: 15,
    uaToKg: 450, // Unidade Animal = 450kg
  }
};

export default BrazilConfig;