"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{3089:function(e,t,a){a.d(t,{z:function(){return l}});var r=a(57437),n=a(2265),s=a(67256),i=a(96061),o=a(60345);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:l=!1,...u}=e,d=l?s.g7:"button";return(0,r.jsx)(d,{className:(0,o.cn)(c({variant:n,size:i,className:a})),ref:t,...u})});l.displayName="Button"},60345:function(e,t,a){a.d(t,{cn:function(){return cn}});var r=a(57042),n=a(74769);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}},16896:function(e,t,a){var r=a(59115),n=a(74810);let s=(0,r.U)()((0,n.tJ)((e,t)=>({currentCountry:"MX",localeConfig:{country:"MX",currency:"MXN",locale:"es-MX",units:{weight:"kg",area:"hectare",volume:"liter",temperature:"celsius"},regulations:["NOM-001-SAG-2023"],taxRules:{vatRate:.16,incomeTaxRate:.3,specialRates:{}}},unitSystem:{weight:"kg",area:"hectare",volume:"liter",temperature:"celsius"},currency:"MXN",lastProcessingResult:null,validationResults:new Map,processingQueue:[],isProcessing:!1,lastAnalysis:null,analysisHistory:new Map,isAnalyzing:!1,isAuthenticated:!1,currentUser:null,profile:null,ranches:[],activeRanch:null,currentRanch:null,animals:[],cattle:[],milkProductions:[],isOnboardingComplete:!1,profilePromptDismissed:!1,onboardingData:{currentStep:1},generateTraceId:()=>"TRACE-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),setCountry:async a=>{e({isProcessing:!0});try{let r={weight:"BR"===a?"arroba":"kg",area:["MX","BR","CO"].includes(a)?"hectare":"acre",volume:["MX","ES"].includes(a)?"liter":"gallon",temperature:"celsius"},n={MX:"MXN",CO:"COP",BR:"BRL",ES:"EUR"},s={country:a,currency:n[a],locale:"".concat(a.toLowerCase(),"-").concat(a),units:r,regulations:[],taxRules:{vatRate:"MX"===a?.16:.21,incomeTaxRate:.3,specialRates:{}}};e({currentCountry:a,localeConfig:s,unitSystem:r,currency:n[a],isProcessing:!1});let i=t();i.animals.length}catch(t){throw e({isProcessing:!1}),t}},addRanch:async a=>{let r=t(),n=r.generateTraceId();try{e({isProcessing:!0});let t=r.validateEntity(a,"ranch");if(!t.isValid){let a={success:!1,errors:t.errors,warnings:t.warnings,metadata:{id:"ranch-validator",version:"1.0.0",name:"Ranch Validator",description:"Validates ranch data",supportedCountries:["MX","CO","BR","ES"],lastUpdated:new Date().toISOString()},traceId:n};return e({lastProcessingResult:a,isProcessing:!1}),a}let s={...a,id:"ranch-".concat(Date.now()),countryCode:r.currentCountry,validationStatus:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(e=>({ranches:[...e.ranches,s],currentRanch:s,activeRanch:s,isProcessing:!1})),r.validationResults.set(s.id,t);let i={success:!0,data:s,metadata:{id:"ranch-processor",version:"1.0.0",name:"Ranch Processor",description:"Processes ranch operations",supportedCountries:["MX","CO","BR","ES"],lastUpdated:new Date().toISOString()},processingTime:Date.now(),traceId:n};return e({lastProcessingResult:i}),i}catch(t){throw e({isProcessing:!1}),t}},addAnimal:async a=>{let r=t(),n=r.generateTraceId();try{e({isProcessing:!0});let t={...a,weightUnit:r.unitSystem.weight,countrySpecificData:{country:r.currentCountry,addedDate:new Date().toISOString()}},s=r.validateEntity(t,"animal");if(!s.isValid){let t={success:!1,errors:s.errors,warnings:s.warnings,metadata:{id:"animal-validator",version:"1.0.0",name:"Animal Validator",description:"Validates animal data",supportedCountries:["MX","CO","BR","ES"],lastUpdated:new Date().toISOString()},traceId:n};return e({lastProcessingResult:t,isProcessing:!1}),t}let i={...t,id:"animal-".concat(Date.now()),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(e=>({animals:[...e.animals,i],cattle:[...e.cattle,i],isProcessing:!1})),r.validationResults.set(i.id,s);let o={success:!0,data:i,metadata:{id:"animal-processor",version:"1.0.0",name:"Animal Processor",description:"Processes animal operations",supportedCountries:["MX","CO","BR","ES"],lastUpdated:new Date().toISOString()},processingTime:Date.now(),traceId:n};return e({lastProcessingResult:o}),o}catch(t){throw e({isProcessing:!1}),t}},validateEntity:(e,a)=>{let r=[],n=[];switch(a){case"ranch":(!e.name||e.name.length<3)&&r.push({code:"RANCH_NAME_INVALID",message:"El nombre del rancho debe tener al menos 3 caracteres",field:"name"}),(!e.size||e.size<=0)&&r.push({code:"RANCH_SIZE_INVALID",message:"El tama\xf1o del rancho debe ser mayor a 0",field:"size"});break;case"animal":e.tag||r.push({code:"ANIMAL_TAG_REQUIRED",message:"La etiqueta del animal es requerida",field:"tag"});let s=t();"MX"!==s.currentCountry||e.tag.startsWith("MX-")||n.push({code:"TAG_FORMAT_SUGGESTION",message:"Se recomienda usar formato MX-XXXXX para M\xe9xico",field:"tag"})}return{isValid:0===r.length,errors:r,warnings:n}},convertWeight:(e,t,a)=>e*({kg:1,lb:.453592,arroba:15})[t]*({kg:1,lb:2.20462,arroba:.0666667})[a],analyzeProfitability:async a=>{e({isAnalyzing:!0});try{var r;let n={revenue:a.revenue,costs:{feed:a.feedCost,labor:a.laborCost,veterinary:a.veterinaryCost,infrastructure:a.infrastructureCost,other:a.otherCosts,total:a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts},profitability:a.revenue-(a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts),margin:(a.revenue-(a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts))/a.revenue*100,breakEvenPoint:{units:Math.ceil((a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts)/(a.revenue/a.animalCount)),revenue:a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts,timeToBreakEven:180},roi:(a.revenue-(a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts))/(a.feedCost+a.laborCost+a.veterinaryCost+a.infrastructureCost+a.otherCosts)*100,projections:[],recommendations:["Optimizar costos de alimentaci\xf3n","Revisar eficiencia laboral"],metadata:{calculatedAt:new Date,locale:(null===(r=t().localeConfig)||void 0===r?void 0:r.locale)||"es-MX",currency:t().currency}};return e({lastAnalysis:n,isAnalyzing:!1}),t().analysisHistory.set("analysis-".concat(Date.now()),n),n}catch(t){throw e({isAnalyzing:!1}),t}},updateAnimal:async(e,a)=>(t().generateTraceId(),{}),deleteAnimal:async e=>(t().generateTraceId(),{}),setCurrentUser:t=>e({currentUser:t,isAuthenticated:!!t}),setLocaleConfig:t=>e({localeConfig:t}),updateUnitSystem:t=>e(e=>({unitSystem:{...e.unitSystem,...t}})),getLastAnalysis:()=>t().lastAnalysis,getValidationErrors:e=>{let a=t().validationResults.get(e);return(null==a?void 0:a.errors)||[]},logout:()=>{e({currentUser:null,profile:null,isAuthenticated:!1,currentRanch:null,activeRanch:null,animals:[],cattle:[],milkProductions:[],isOnboardingComplete:!1,profilePromptDismissed:!1,onboardingData:{currentStep:1},lastProcessingResult:null,validationResults:new Map,processingQueue:[],lastAnalysis:null,analysisHistory:new Map}),localStorage.removeItem("ranch-store")},setActiveRanch:t=>e({activeRanch:t}),getAnimalsByRanch:e=>t().animals.filter(t=>t.ranchId===e),getCattleByRanch:e=>t().cattle.filter(t=>t.ranchId===e),getTotalMilkProduction:function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"liter",r=t(),n=e||new Date().toISOString().split("T")[0],s=r.milkProductions.filter(e=>e.date===n).reduce((e,t)=>{let a="gallon"===t.unit?3.78541*t.quantity:t.quantity;return e+a},0);return"gallon"===a?s/3.78541:s},updateRanch:async()=>({}),deleteRanch:async()=>({}),addMilkProduction:async()=>({}),setProfilePromptDismissed:t=>e({profilePromptDismissed:t}),setIsOnboardingComplete:t=>e({isOnboardingComplete:t}),setOnboardingStep:()=>{},setOnboardingData:()=>{},completeOnboarding:()=>{},resetOnboarding:()=>{},addCattle:()=>{},getAnimalStats:()=>({total:0,byStatus:{},byType:{}})}),{name:"ranch-store-v2",partialize:e=>({currentCountry:e.currentCountry,localeConfig:e.localeConfig,unitSystem:e.unitSystem,currency:e.currency,isAuthenticated:e.isAuthenticated,currentUser:e.currentUser,profile:e.profile,ranches:e.ranches,currentRanch:e.currentRanch,activeRanch:e.activeRanch,animals:e.animals,cattle:e.cattle,milkProductions:e.milkProductions,isOnboardingComplete:e.isOnboardingComplete,profilePromptDismissed:e.profilePromptDismissed,onboardingData:e.onboardingData})}));t.Z=s}}]);